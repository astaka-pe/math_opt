# グラフ最適化

## 1. グラフ理論

### 1.1 グラフとは

- [networkxの使い方](note/p4-1.ipynb)

### 1.2 様々なグラフ

- 単純グラフ：自己ループや多重辺を持たない
- 完全グラフ：さらにどの頂点間も枝で隣接
- 2部グラフ：VがXとYに分割され、どの枝もXとYの両方に接続
- 完全2部グラフ：XとYのどの頂点間にも枝が存在
- サイクルグラフ
- 星グラフ
- 車輪グラフ
- 格子グラフ
- 立方体グラフ

### 1.3 次数、同型性、部分グラフ

略

### 1.4 経路、閉路、パス、サイクル

略

## 2. 木と最適化

### 2.1 木、全域木、最小全域木

- 木：サイクルを持たない連結グラフ
- 全域木：連結なグラフGの全頂点を使った、サイクルを持たない連結な部分グラフ
- **最小全域木問題**：連結グラフGについて、枝の重みが最小となるような全域木を求める
  - ネットワーク連結問題
  - [貪欲算法](note/p4-2.ipynb)：枝の重みの小さい順にサイクルができない限り限り木に入れていく

### 2.2 木とグラフ探索

- 深さ優先探索（DFS）
  - スタック（LIFO）
  - [networkx.dfs_tree](https://networkx.org/documentation/stable/reference/algorithms/generated/networkx.algorithms.traversal.depth_first_search.dfs_tree.html)
- 幅優先探索（BFS）
  - キュー（FIFO）
  - [networkx.bfs_tree](https://networkx.org/documentation/networkx-1.10/reference/generated/networkx.algorithms.traversal.breadth_first_search.bfs_tree.html)

### 2.3 木とデータ構造

- ヒープ
  - [別リポジトリ](https://github.com/astaka-pe/algorithm/tree/main/chap10)参照
- 2分探索木

## 3. 経路最適化

### 3.1 最短路問題

- ダイクストラ法

### 3.2 オイラー閉路と郵便配達人問題

- 郵便配達人問題：すべての道路を1回以上通過する時、移動距離が最小となる巡回路（閉路）を求める
  - 重み最小のオイラーグラフを求める

### 3.3 ハミルトン閉路とTSP

- ハミルトン路：遠結グラフの全頂点をちょうど1度ずつ訪れる歩道
- 巡回セールスマン問題（TSP）：すべての都市をちょうど1回ずつ訪れて元の都市に戻ってくる時、移動距離が最小となる巡回経路を求める
  - NP困難 → 厳密解法と近似解法がある

### 3.4 最大流問題、最小カット問題

- 最大流問題：容量付き有向グラフにおいて、点sからtへどのくらいの量を流すことができるか
- 最小カット問題：容量付き有向グラフにおいて、容量が最小となるs,tカットを求める
- 最大流・最小カット定理（maxflow-mincut theorem）：s,t間の最大流の値は、容量最小のs,tカットの値に等しい

### 3.5 最小費用流問題

1品種のものの流れを最適化する問題

## 4. グラフの分割と最適化

人と仕事の割り当てや時間割決定などに応用される

### 4.1 マッチング

- 最大マッチング問題：要素数が最大となるマッチングMを求める
  - 増加路：マッチングに入らない点からスタートし、マッチングに入らない枝とマッチングの枝を交互に使い、最後はマッチング入らない点にたどり着くパス → 枝を交換するとマッチングの要素数が**1つ増える**
  - Mは最大マッチングである <=> Gは増加路を持たない
- 重み最大マッチング問題：重みの合計が最大となるマッチングMを求める
- 重み最小マッチング問題
  - 枝の重み（非負）を重みの最大値を利用して変換し、重み最大マッチング問題を解く
- 2部グラフでのマッチング
  - ハンガリー法
  - 割り当て問題

### 4.2 返彩色問題

連結グラフの同じ点に接続する枝を別の色で塗るのに必要な色数・彩色を求める

- クロマティックインデックス：必要な最小の色数
- 0-1整数線型最適化問題としての定式化
- **時間割問題**：2部グラフの返彩色問題
  - 左側の点：教員、右側の点：クラス
  - 時間帯ごとの授業の割り当てを色で表す

### 4.3 点彩色と彩色多項式

隣接している頂点を別の色で着色するのに必要な色数・彩色を求める

- クロマティックナンバー：必要な最小の色数
- 彩色多項式：すべての頂点をk色で彩色する時何通りの方法があるかを表す多項式 $P_G(k)$

### 4.4 平面グラフと4色定理

- 平面グラフ：枝を交差することなく平面に描くことのできるグラフ
  - 埋め込み：平面グラフを枝が交差しないように平面に描くこと
- ４色定理：どんな平面の地図も隣接する領域が異なる色に４色で塗り分けることができる（平面グラフは4色で点彩色可能である）