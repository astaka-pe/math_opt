# 3. 学校のクラス編成

## 3.1 導入

- 最適性：最適なクラス編成ができる
- コスト削減：自動化することで作業コストを削減する
- 柔軟性：クラス編成のルールを変更しても修正コストが少ない
- 公平性：恣意的な操作をせずクラス編成ができる

## 3.2 課題整理

学年の全生徒318人（男子158人、女子160人）をそれぞれ1つのクラス（全8クラス）に割り当てる

- 各クラスの生徒の人数は39人以上、40人以下
- 各クラスの男子、女子の人数は20人以下
- 各クラスの学力試験の平均点は、学年平均点±10点
- 各クラスにリーダー気質の生徒を2人以上割り当てる
- 特別な支援が必要な生徒は各クラスに1人以下
- 特定ペアの生徒は同一クラスに割り当てない

## 3.3 数理モデリングと実装

```
df["score"].describe()
->
count    318.000000
mean     303.644654
std       65.179995
min       88.000000
25%      261.000000
50%      310.000000
75%      350.000000
max      485.000000
Name: score, dtype: float64
```

正規分布に従っているならば、$\rm mean \pm std$ に約68%のデータが、$\rm mean \pm 2 \times std$ に約95%のデータ含まれる

```
# 可視化
df["score"].hist()
```

[実装例](class_model.py)

## 3.4 数理モデルの検証

- 解が要件を満たしているかどうか確認する
- 設定した制約の見直しと課題の洗い出し
  - 学力の分布を可視化すると、仮定（正規分布）と全く異なる形状を持つ可能性がある
  - 問題特有の暗黙知やデータの特性により、何度も要件変更が起きる
- 制約の改善と数理最適化モデルの修正

現場では、

- 学力順で生徒をクラスに割り当て
- 配置換えを繰り返し、要件を満たすように再編する

**いくつもの課題解決を通して数理モデルをブラッシュアップしていく**